/* Optimisations mobiles pour améliorer les performances et réduire le CLS */

/* Variables CSS pour les optimisations */
:root {
  --mobile-animation-duration: 0.2s;
  --mobile-transition-duration: 0.15s;
  --mobile-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  --mobile-border-radius: 8px;
}

/* Optimisations générales pour mobile */
@media (max-width: 768px) {
  /* Réduire les animations sur mobile */
  * {
    animation-duration: var(--mobile-animation-duration) !important;
    transition-duration: var(--mobile-transition-duration) !important;
  }
  
  /* Prévenir le layout shift */
  .card, .button, .input, .modal {
    min-height: 44px; /* Taille minimale pour les éléments tactiles */
    box-sizing: border-box;
  }
  
  /* Optimiser les images */
  img {
    aspect-ratio: attr(width) / attr(height);
    object-fit: cover;
  }
  
  /* Réduire les ombres pour de meilleures performances */
  .shadow-lg, .shadow-xl {
    box-shadow: var(--mobile-shadow) !important;
  }
  
  /* Simplifier les backdrop-filters */
  .backdrop-blur-lg, .backdrop-blur-md {
    backdrop-filter: blur(4px) !important;
  }
  
  /* Optimiser les transitions */
  .hover\:scale-105:hover,
  .hover\:scale-110:hover {
    transform: none !important;
  }
  
  /* Améliorer la réactivité des boutons */
  button, [role="button"] {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    min-height: 44px;
    padding: 12px 16px;
  }
  
  /* Optimiser les inputs */
  input, textarea, select {
    font-size: 16px !important; /* Éviter le zoom sur iOS */
    transform: translateZ(0); /* Force GPU acceleration */
    -webkit-appearance: none;
    border-radius: var(--mobile-border-radius);
  }
  
  /* Améliorer le scroll */
  body {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Réduire la complexité des animations */
  .animate-pulse, .animate-bounce {
    animation: none !important;
  }
  
  /* Optimiser les gradients */
  .bg-gradient-to-r, .bg-gradient-to-br {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  }
}

/* Optimisations spécifiques pour les appareils bas de gamme */
@media (max-width: 768px) and (max-device-memory: 2gb) {
  * {
    animation: none !important;
    transition: none !important;
  }
  
  .glassmorphism {
    background: rgba(255, 255, 255, 0.9) !important;
    backdrop-filter: none !important;
  }
  
  .blur-effect {
    filter: none !important;
  }
}

/* Optimisations pour les écrans haute densité */
@media (max-width: 768px) and (-webkit-min-device-pixel-ratio: 2) {
  img {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Optimisations pour les appareils avec préférence de mouvement réduit */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Optimisations pour les connexions lentes */
@media (max-width: 768px) and (prefers-reduced-data: reduce) {
  img {
    loading: lazy;
  }
  
  .background-image {
    background-image: none !important;
    background-color: #f3f4f6;
  }
}

/* Classes utilitaires pour mobile */
.mobile-optimized {
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000;
  perspective: 1000;
}

.mobile-touch-target {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation;
}

.mobile-no-layout-shift {
  contain: layout style paint;
  will-change: auto;
}

/* Optimisations pour les composants spécifiques */
@media (max-width: 768px) {
  /* Navigation */
  .nav-item {
    padding: 12px 16px;
    min-height: 44px;
  }
  
  /* Cards */
  .card {
    border-radius: var(--mobile-border-radius);
    box-shadow: var(--mobile-shadow);
    margin-bottom: 16px;
  }
  
  /* Modals */
  .modal {
    border-radius: var(--mobile-border-radius);
    max-height: 90vh;
    overflow-y: auto;
  }
  
  /* Forms */
  .form-group {
    margin-bottom: 16px;
  }
  
  .form-input {
    height: 44px;
    font-size: 16px;
  }
  
  /* Buttons */
  .btn {
    height: 44px;
    padding: 12px 20px;
    font-size: 16px;
    font-weight: 500;
  }
  
  /* Lists */
  .list-item {
    padding: 12px 16px;
    min-height: 44px;
  }
}

/* Optimisations pour l'orientation paysage sur mobile */
@media (max-width: 768px) and (orientation: landscape) {
  .modal {
    max-height: 80vh;
  }
  
  .header {
    padding: 8px 16px;
  }
  
  .nav-item {
    padding: 8px 12px;
  }
}