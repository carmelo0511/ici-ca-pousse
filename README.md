# üèãÔ∏è Ici √áa Pousse - Application de Fitness Gamifi√©e

[![React](https://img.shields.io/badge/React-18.2.0-blue.svg)](https://reactjs.org/)
[![Firebase](https://img.shields.io/badge/Firebase-10.7.0-orange.svg)](https://firebase.google.com/)
[![PWA](https://img.shields.io/badge/PWA-Ready-green.svg)](https://web.dev/progressive-web-apps/)
[![Tests](https://img.shields.io/badge/Tests-Passing-brightgreen.svg)](https://jestjs.io/)
[![Coverage](https://img.shields.io/badge/coverage-85%25-brightgreen)](https://jestjs.io/)
[![Linting](https://img.shields.io/badge/ESLint-Clean-brightgreen.svg)](https://eslint.org/)
[![Deploy](https://img.shields.io/badge/Deploy-Vercel-black.svg)](https://vercel.com/)

## üåê Application en ligne

**[ici-ca-pousse.vercel.app](https://ici-ca-pousse.vercel.app)**

Application moderne de suivi de s√©ances de sport avec gamification avanc√©e, fonctionnalit√©s sociales compl√®tes et coach IA intelligent.

## üöÄ Fonctionnalit√©s

### üéÆ Gamification Avanc√©e
- **Syst√®me de niveaux et XP** : Progression bas√©e sur la dur√©e, vari√©t√© d'exercices et streaks
- **Streak anim√©** : Compteur de jours cons√©cutifs avec bonus XP
- **Badges et r√©alisations** : D√©bloquez des badges pour vos exploits
- **Leaderboard dynamique** : Classement entre amis selon diff√©rents crit√®res

### üîê Authentification & Profil
- **Connexion Google** : Authentification rapide et s√©curis√©e
- **Gestion du profil** : Photo, pseudo, surnom personnalis√© et badge s√©lectionn√©
- **Notifications en temps r√©el** : Suivi des invitations et rappels

### üë• Social & D√©fis
- **Syst√®me d'amis** : Ajoutez, g√©rez vos connexions avec bouton d'invitation direct
- **D√©fis personnalis√©s** : Lancez des challenges √† vos amis
- **Notifications intelligentes** : Rappels et f√©licitations automatiques
- **Profils enrichis** : Photos de profil, statistiques d√©taill√©es, surnoms personnalis√©s

### üìä Analytics & Progression
- **Syst√®me de suivi du poids** : Enregistrez votre poids chaque semaine, visualisez votre √©volution sur une courbe d√©di√©e, recevez un rappel intelligent pour ne rien oublier.
- **Statistiques avanc√©es** : Graphiques, comparaisons, historique
- **Courbe d'√©volution du poids** : Suivi visuel de votre poids semaine par semaine, affich√©e en haut de la page Statistiques
- **Notification hebdomadaire** : Rappel automatique chaque d√©but de semaine pour mettre √† jour votre poids (avec option 'C'est le m√™me')
- **Suivi des performances** : Records personnels, tendances
- **Calendrier interactif** : Vue d'ensemble de vos s√©ances avec bouton de suppression
- **Export de donn√©es** : Sauvegarde de vos progr√®s

### üåê Internationalisation
- **Fran√ßais / Anglais** : Interface disponible dans deux langues
- **Formatage localis√©** : Dates et unit√©s adapt√©es automatiquement

### üì± PWA & Mobile-First
- **Header ultra-compact** : Nouveau header moderne, mobile-first, avec titre √† gauche et navigation optimis√©e
- **Application installable** : Fonctionne hors ligne
- **Design responsive** : Optimis√© mobile et desktop
- **Performance optimis√©e** : Chargement rapide, animations fluides
- **Accessibilit√©** : Compatible avec les lecteurs d'√©cran
- **Mode sombre global** : Commutation instantan√©e clair/sombre
- **Notifications push** : Restez inform√© m√™me hors de l'application

### ü§ñ Coach Lex IA - Assistant Personnel Intelligent
- **Coach virtuel personnalis√©** : Coach Lex IA vous accompagne dans votre parcours fitness avec des conseils adapt√©s
- **Messages de f√©licitations automatiques** : Recevez des encouragements personnalis√©s apr√®s chaque s√©ance avec analyse de votre r√©gularit√© et records
- **Bulle de chat flottante** : Acc√®s direct au coach depuis n'importe quel onglet avec notifications des nouveaux messages
- **Contexte personnalis√©** : L'IA prend en compte vos derni√®res s√©ances, votre taille et votre poids pour adapter ses r√©ponses
- **Acc√®s aux donn√©es utilisateur** : Le coach utilise vos informations de profil (taille, poids, pr√©nom) pour des conseils personnalis√©s
- **Interface unifi√©e** : Plus de mode "libre" ou "recommandation" √† choisir, tout se fait dans la m√™me interface de chat
- **Mode sombre** : Interface adapt√©e aux th√®mes clairs et fonc√©s
- **Tests d√©di√©s** : Sc√©narios v√©rifiant le comportement du coach (envoi de message, gestion du contexte, API key, interface unifi√©e)

**Exemples d'utilisation :**
- "Comment am√©liorer ma r√©cup√©ration apr√®s l'entra√Ænement ?"
- "Peux-tu me donner une recette saine ?"
- "J'ai du mal √† rester motiv√©, des conseils ?"
- "Explique-moi la diff√©rence entre cardio et musculation."
- "Quels sont les bienfaits de la m√©ditation ?"

#### üèãÔ∏è G√©n√©ration automatique de s√©ances personnalis√©es

Le coach peut d√©sormais g√©n√©rer pour vous une s√©ance compl√®te, pr√™te √† √™tre valid√©e dans l'application :

- Cliquez sur **"Propose-moi une s√©ance"** dans l'onglet Coach Lex IA
- Choisissez le **type de s√©ance** (Full body, Haut du corps, Bas du corps, Push, Pull, Cardio, Abdos, HIIT, Mobilit√©‚Ä¶)
- Choisissez l'**intensit√©** (Facile, Moyen, Difficile)
- Cliquez sur **Valider**
- Vous serez automatiquement redirig√© vers la page de cr√©ation de s√©ance, avec :
  - **4 √† 6 exercices** adapt√©s au type choisi (al√©atoires √† chaque fois)
  - **3 √† 4 s√©ries** par exercice (al√©atoire)
  - R√©p√©titions ou dur√©e adapt√©es √† l'intensit√©
  - Il ne vous reste qu'√† remplir les poids utilis√©s

**Exemple d'utilisation :**
- "Propose-moi une s√©ance full body difficile" (ou utilisez le menu du coach)
- "Je veux une s√©ance abdos facile"

#### üìä R√©capitulatif intelligent des derni√®res s√©ances

- **Bouton "R√©cap des derni√®res s√©ances"** : Analyse d√©taill√©e de vos 3 derni√®res s√©ances
- **Format de date lisible** : "23 Juillet 2025" au lieu de "2025-07-23"
- **D√©tails complets** : S√©ries, r√©p√©titions, poids pour chaque exercice
- **Recommandations intelligentes** : Le coach analyse la r√©partition haut/bas du corps et vous conseille sur la prochaine s√©ance
- **Messages personnalis√©s** : Le coach vous appelle par votre pr√©nom

Vous pouvez aussi continuer √† poser toutes vos questions sport, nutrition, motivation, etc. Coach Lex IA reste votre coach personnel intelligent !

## üèóÔ∏è Architecture

```mermaid
graph TB
    subgraph "Frontend - React 18"
        A[App.js] --> B[Context API]
        B --> C[useAppState]
        B --> D[useWorkouts]
        B --> E[useExperience]
        B --> F[useFriends]
        
        A --> G[Components]
        G --> H[Header]
        G --> I[Navigation]
        G --> J[WorkoutList]
        G --> K[CalendarView]
        G --> L[StatsView]
        G --> M[Coach Lex IA]
        G --> N[ChatbotBubble]
    end
    
    subgraph "Backend - Firebase"
        O[Authentication] --> P[Google Auth]
        Q[Firestore] --> R[Workouts]
        Q --> S[Users]
        Q --> T[Friends]
        Q --> U[Challenges]
        V[Storage] --> W[Profile Pictures]
    end
    
    subgraph "External Services"
        X[OpenAI API] --> Y[Coach Lex IA]
        Z[Vercel] --> AA[Deployment]
        BB[GitHub Actions] --> CC[CI/CD]
    end
    
    A -.-> O
    A -.-> Q
    A -.-> V
    M -.-> X
    Z --> A
```

### üìÅ Structure du Projet

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ common/           # Composants r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ features/         # Fonctionnalit√©s m√©tier
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ workout/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ badges/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ challenges/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ leaderboard/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stats/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Chatbot/      # Coach Lex IA
‚îÇ   ‚îî‚îÄ‚îÄ layout/           # Composants de mise en page
‚îú‚îÄ‚îÄ hooks/                # Hooks personnalis√©s
‚îú‚îÄ‚îÄ utils/                # Utilitaires
‚îú‚îÄ‚îÄ constants/            # Constantes
‚îî‚îÄ‚îÄ App.js               # Point d'entr√©e
```

## üõ†Ô∏è Installation & D√©veloppement

### Pr√©requis
- Node.js 18+ 
- npm ou yarn
- Compte Firebase
- Cl√© API OpenAI (pour Coach Lex IA)

### Installation

```bash
# Cloner le projet
git clone https://github.com/bryannakache/ici-ca-pousse.git
cd ici-ca-pousse

# Installer les d√©pendances
npm install

# D√©marrer en mode d√©veloppement
npm start
```

### Scripts disponibles

```bash
npm start          # D√©marre le serveur de d√©veloppement
npm run build      # Build de production
npm test           # Lance les tests
npm run test:coverage  # Tests avec couverture
npm run lint       # V√©rification du code (0 erreurs, 0 warnings)
npm run format     # Formatage automatique
```

## üî• Configuration Firebase

### 1. Cr√©er un projet Firebase
1. Allez sur [Firebase Console](https://console.firebase.google.com/)
2. Cr√©ez un nouveau projet "ici-ca-pousse"
3. Activez l'authentification Google
4. Cr√©ez une base de donn√©es Firestore
5. Activez Firebase Storage

### 2. Variables d'environnement
Cr√©ez un fichier `.env.local` :

```env
REACT_APP_FIREBASE_API_KEY=your_api_key
REACT_APP_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
REACT_APP_FIREBASE_PROJECT_ID=your_project_id
REACT_APP_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
REACT_APP_FIREBASE_APP_ID=your_app_id
REACT_APP_OPENAI_API_KEY=your_openai_api_key
```

### 3. R√®gles Firestore
Dans Firebase Console > Firestore Database > Rules :

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Workouts - utilisateur peut lire/√©crire ses propres donn√©es
    match /workouts/{workoutId} {
      allow read, write: if request.auth != null 
                         && request.auth.uid == resource.data.userId;
    }
    
    // Users - lecture publique, √©criture propri√©taire
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null 
                   && request.auth.uid == userId;
    }
    
    // Friends - lecture/√©criture pour utilisateurs connect√©s
    match /friends/{friendId} {
      allow read, write: if request.auth != null;
    }
    
    // Challenges - lecture/√©criture pour utilisateurs connect√©s
    match /challenges/{challengeId} {
      allow read, write: if request.auth != null;
    }
  }
}
```

### 4. R√®gles Storage
Dans Firebase Console > Storage > Rules :

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Photos de profil
    match /profile-pictures/{userId}/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null 
                   && request.auth.uid == userId
                   && request.resource.size < 5 * 1024 * 1024 // 5MB max
                   && request.resource.contentType.matches('image/.*');
    }
    
    // R√®gles par d√©faut - refuser tout le reste
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
```

### 5. Fichiers de configuration Firebase
Le projet contient plusieurs fichiers de configuration Firebase utiles :

- **`firebase-storage-rules.txt`** : R√®gles Storage compl√®tes pour les photos de profil
- **`firebase-firestore-rules-default.txt`** : R√®gles Firestore par d√©faut (acc√®s complet)
- **`firebase-storage-rules-default.txt`** : R√®gles Storage par d√©faut (acc√®s complet)
- **`FIREBASE_SETUP.md`** : Guide d√©taill√© de configuration Firebase
- **`REFACTORING_NOTES.md`** : Notes sur l'architecture et les refactorings
- **`ARCHITECTURE.md`** : Documentation de l'architecture du projet

**‚ö†Ô∏è Note** : Les fichiers `*-default.txt` contiennent des r√®gles moins s√©curis√©es pour le d√©veloppement. Utilisez les r√®gles s√©curis√©es en production.

## üöÄ D√©ploiement

### D√©ploiement automatique (recommand√©)
1. Connectez votre repo GitHub √† Vercel
2. Configurez les variables d'environnement dans Vercel
3. D√©ploiement automatique √† chaque push

### D√©ploiement manuel
```bash
npm run build
# Uploadez le dossier build/ sur votre h√©bergeur
```

## üß™ Tests

> **Couverture actuelle :**
> - **Statements** : 85.49%
> - **Branches** : 59.45%
> - **Functions** : 93.1%
> - **Lines** : 89.56%

### Suite de Tests Compl√®te
Le projet dispose d'une suite de tests moderne et extensible :

- **Tests de hooks** :
  - `useAppState` (gestion d'√©tat global, 100% couvert)
  - `useExercises` (gestion des exercices, ajout/suppression/√©dition)
  - `useChatGPT` (int√©gration API OpenAI, gestion des messages, contexte, erreurs)
- **Tests de composants** :
  - `Chatbot` (envoi de messages, gestion du contexte personnalis√©, API key, interface unifi√©e, mode sombre)
- **Tests utilitaires** :
  - `workoutUtils` (calculs, analyse, formatage, badges)
  - `leaderboardUtils` (classements, stats, labels)

**Nouveau** :
- Coach Lex IA a √©t√© mis √† jour pour accepter toutes les questions dans une interface unique, et les tests v√©rifient ce comportement (interface, contexte, gestion des erreurs, personnalisation).

### Lancement des tests
```bash
# Tests unitaires et d'int√©gration
npm test

# Tests avec couverture
npm run test:coverage
```

### Structure des Tests
```
src/tests/
‚îú‚îÄ‚îÄ hooks/           # Tests des hooks personnalis√©s
‚îÇ   ‚îú‚îÄ‚îÄ useAppState.test.js
‚îÇ   ‚îú‚îÄ‚îÄ useExercises.test.js
‚îÇ   ‚îî‚îÄ‚îÄ useChatGPT.test.js
‚îú‚îÄ‚îÄ components/      # Tests des composants
‚îÇ   ‚îî‚îÄ‚îÄ Chatbot.test.js
‚îî‚îÄ‚îÄ utils/           # Tests des utilitaires
    ‚îú‚îÄ‚îÄ workoutUtils.test.js
    ‚îî‚îÄ‚îÄ leaderboardUtils.test.js
```

### Couverture d√©taill√©e
- **Statements** : 85.49%
- **Branches** : 59.45%
- **Functions** : 93.1%
- **Lines** : 89.56%

**Note** : La couverture a √©t√© maintenue gr√¢ce √† la suite de tests compl√®te et aux tests pour Coach Lex IA et les hooks principaux.

## üìà Roadmap 2025

### ‚úÖ Compl√©t√©
- [x] Syst√®me de niveaux, XP et progression
- [x] Streak anim√© avec bonus
- [x] Leaderboard dynamique entre amis
- [x] Badges, r√©alisations et photos de profil
- [x] D√©fis entre amis et notifications intelligentes
- [x] PWA installable et design mobile-first
- [x] Header ultra-compact et moderne
- [x] Suite de tests compl√®te (100% sur useAppState)
- [x] Coach Lex IA (fonctionnel en d√©veloppement, acc√®s aux donn√©es utilisateur, interface unifi√©e, conseils personnalis√©s)
- [x] Syst√®me de suivi du poids (courbe d'√©volution, notification hebdomadaire intelligente)
- [x] G√©n√©ration automatique de s√©ances personnalis√©es par le coach (type, intensit√©, exercices/s√©ries al√©atoires)
- [x] Messages de f√©licitations automatiques apr√®s chaque s√©ance
- [x] Bulle de chat flottante avec synchronisation des messages
- [x] R√©capitulatif intelligent des derni√®res s√©ances avec recommandations
- [x] Surnoms personnalis√©s dans le profil et leaderboard
- [x] Boutons d'invitation d'amis dans le leaderboard
- [x] Bouton de suppression des s√©ances dans le calendrier
- [x] Code propre avec 0 erreurs ESLint

### üöß En d√©veloppement
- [ ] Recommandations d'exercices intelligentes
- [ ] Analyse de performance avanc√©e
- [ ] Int√©gration wearables (Apple Watch, Fitbit)

### üìã Planifi√©
- [ ] Th√®mes personnalisables
- [ ] Export/import de donn√©es (poids, s√©ances, etc.)
- [ ] Analyse avanc√©e du poids (tendances, alertes, objectifs)
- [ ] Suggestions IA ultra-personnalis√©es (nutrition, r√©cup√©ration, etc.)
- [ ] Mode comp√©tition avanc√©
- [ ] R√©seau social enrichi

## üîß D√©pannage

### Erreurs Firebase
- **Erreur 404 Storage** : Firebase Storage non activ√©
- **Erreur CORS** : R√®gles de s√©curit√© incorrectes
- **Erreur d'autorisation** : Utilisateur non connect√©
- **Erreur de quota** : Limite de stockage atteinte

### Erreurs courantes
- **Photos de profil** : V√©rifiez la configuration Storage
- **Authentification** : V√©rifiez les variables d'environnement
- **Synchronisation** : V√©rifiez les r√®gles Firestore
- **Performance** : V√©rifiez la taille des images upload√©es
- **Coach Lex IA** : V√©rifiez la cl√© API OpenAI

### Support
- **Issues** : [GitHub Issues](https://github.com/bryannakache/ici-ca-pousse/issues)
- **Documentation** : [Wiki du projet](https://github.com/bryannakache/ici-ca-pousse/wiki)

## ü§ù Contribution

### Comment contribuer
1. Fork le projet
2. Cr√©ez une branche feature (`git checkout -b feature/AmazingFeature`)
3. Committez vos changements (`git commit -m 'Add AmazingFeature'`)
4. Push vers la branche (`git push origin feature/AmazingFeature`)
5. Ouvrez une Pull Request

### Standards de code
- **ESLint** : Configuration standard React (0 erreurs, 0 warnings)
- **Prettier** : Formatage automatique
- **Tests** : Minimum 80% de couverture
- **Commits** : Convention Conventional Commits

## üìÑ Licence

Ce projet est sous licence MIT. Voir le fichier [LICENSE](LICENSE) pour plus de d√©tails.

## üë®‚Äçüíª D√©veloppeur

- **D√©veloppeur Full-Stack** : [Bryan Nakache](https://github.com/bryannakache)
- **Technologies** : React, Firebase, PWA, Gamification, IA
- **Focus** : UX/UI, Performance, Tests, Code Quality

